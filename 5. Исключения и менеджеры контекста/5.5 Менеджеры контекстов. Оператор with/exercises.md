# Менеджеры контекстов. Оператор _with_

## ex_3
### Объявите класс _PrimaryKey_, который должен работать совместно с менеджером контекста следующим образом:

```python
with PrimaryKey() as pk:
    raise ValueError
```

где _pk_ - ссылка на объект класса _PrimaryKey_.

Класс _PrimaryKey_ должен в момент входа в менеджер контекста выводить на экран сообщение "вход", а при завершении работы менеджера контекста выводить тип возникшего исключения. 

Класс _PrimaryKey_ следует реализовать так, чтобы менеджер контекста сам обрабатывал возникшее исключение.

## ex_4
### Вам поручено разработать класс _DatabaseConnection_ для управления подключением к базе данных.

Объекты этого класса создаются командой:

```python
conn = DatabaseConnection()
```

В самом классе необходимо объявить метод:

```python
def connect(self, login, password): ...
```

для подключения к БД.

В данной реализации этот метод должен устанавливать локальный атрибут **_fl_connection_open** в значение _True_:

```python
_fl_connection_open = True
```

и генерировать исключение с помощью собственного класса _ConnectionError_ унаследованного от базового класса _Exception_.

Также в классе _DatabaseConnection_ должен быть метод:

```python
def close(self): ...
```


для закрытия соединения.

В этом методе нужно атрибут **_fl_connection_open** установить в значение _False_.

Метод **close()** необходимо вызывать всякий раз после завершения работы с БД, вне зависимости от того, произошли какие-либо исключения или нет.

Этот функционал (автоматическое закрытие соединения с БД) предполагается реализовывать посредством менеджера контекста с использованием класса _DatabaseConnection_ следующим образом:

```python
with DatabaseConnection() as conn:
    # операторы менеджера контекста
```

Пропишите дополнительно в классе _DatabaseConnection_ необходимые магические методы для такого его использования совместно с оператором _with_.

P.S. В программе нужно объявить только класс. На экран ничего выводить не нужно.

## ex_5
### Объявите класс _Box_ (ящик), объекты которого создаются командой:

```python
box = Box(name, max_weight)
```

где _name_ - название ящика (строка);

_max_weight_ - максимальный суммарный вес вещей в ящике (любое положительное число). 

В каждом объекте этого класса должны формироваться локальные атрибуты:

**_name** - ссылка на параметр name;

**_max_weight** - ссылка на параметр _max_weight_;

**_things** - список из вещей, хранящиеся в ящике (изначально пустой список).

В классе _Box_ объявите метод:

```python
def add_thing(self, obj)
```

для добавления новой вещи в ящик, где _obj_ - кортеж из двух значений:

```python
(название_вещи, вес_вещи)
```

Если в момент добавления новой вещи суммарный вес всех вещей в ящике становится больше величины **_max_weight**, то генерировать исключение командой:

```python
raise ValueError('превышен суммарный вес вещей')
```

Затем, объявите еще один класс _BoxDefender_, который должен работать совместно с менеджером контекста следующим образом (эти строчки в программе не писать):

```python
box = Box("сундук", 1000)
box.add_thing(("спички", 46.6))
box.add_thing(("рубашка", 134))

with BoxDefender(box) as b:
    b.add_thing(("зонт", 346.6))
    b.add_thing(("шина", 500))
    ...
```

Здесь _b_ - это ссылка на объект класса _Box_.

Если при добавлении вещей возникает исключение _ValueError_, то объект box должен оставаться без изменений (с теми вещами, что были до вызова менеджера контекста).

Иначе, все добавленные вещи остаются в объекте _box_.

P.S. В программе только объявить классы. Выводить что-либо на экран и использовать классы не нужно.
